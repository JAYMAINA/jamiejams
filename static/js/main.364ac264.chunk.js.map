{"version":3,"sources":["assets/textured_background_green.jpg","assets/y.svg","assets/jamie.svg","assets/100-fireworks.gif","assets/sounds/add2.mp3","assets/sounds/remove2.mp3","assets/cassette.png","assets/sounds/wrong.mp3","assets/sounds/correct.mp3","assets/sounds/success.mp3","FirebaseContext.js","CurrentUserContext.js","LobbyContext.js","GameRoomContext.js","COLORS.js","components/Background/Background.js","components/Header/Header.js","components/Labels/GenericLabel.js","components/Button/Button.js","components/Spinner/Spinner.js","components/SignIn/SignIn.js","components/SignIn/HostHandler.js","components/SignIn/PlayerHandler.js","components/Lobby/Results.js","ip.js","components/Lobby/Search.js","components/Lobby/SelectedPlaylist.js","components/Lobby/Users.js","components/Lobby/SelectedPlaylistPlayer.js","components/Button/VolumeButton.js","components/Lobby/HostLobby.js","components/ErrorScreen/ErrorScreen.js","components/ErrorScreen/GameInProgress.js","components/Lobby/LobbyWrapper.js","components/GameRoom/ProgressBar.js","components/GameRoom/Cassette.js","components/GameRoom/LevenTest.js","components/GameRoom/SearchBar.js","components/GameRoom/PreviousSongs.js","components/GameRoom/Ranking.js","components/GameRoom/GameRoom.js","components/GameRoom/GameOver.js","components/GameRoom/GameRoomWrapper.js","GlobalStyles.js","components/App.js","index.js"],"names":["module","exports","FireBaseContext","createContext","firebaseApp","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","FireBaseContextProvider","children","Provider","CurrentUserContext","React","CurrentUserContextProvider","useState","currentRoomId","setCurrentRoomId","currentUser","setCurrentUser","usersList","setUsersList","artist","songName","time","correctGuess","setCorrectGuess","currentTrackGuesses","setCurrentTrackGuesses","undefined","isHostPresent","setIsHostPresent","console","log","useEffect","RoomRef","ref","length","onDisconnect","remove","cancel","playerId","on","snapshot","players","val","SortedArray","Object","values","sort","a","b","points","host","find","user","role","value","LobbyContext","initialState","searchResults","selectedPlaylist","loadState","Reducer","state","action","type","playlist","id","Error","LobbyContextProvider","useReducer","playlistState","dispatch","roomIdState","setRoomId","location","setLocation","roomExists","setRoomExists","roomLocationRef","locationFromDatabase","off","startSearch","receivePlaylists","data","selectPlaylist","deletePlaylist","GameRoomContext","GameRoomContextProvider","trackUrl","setTrackUrl","gamePhase","setGamePhase","trackInfo","setTrackInfo","historyArray","setHistoryArray","result","setResult","round","setRound","GameRoomId","gameRoomExists","setGameRoomExists","gameStarted","setGameStarted","COLORS","main","secondary","tertiary","midnight","Wrapper","styled","div","ChildWrapper","Footer","Link","Background","style","backgroundImage","background","href","target","src","logo","alt","height","Header","Content","GenericLabel","Button","handler","disabled","StyledButton","onClick","button","Spinner","size","color","SpinWheel","props","Spin","keyframes","FiLoader","Input","input","SignInHost","buttonHandler","buttonMessage","nickName","setNickName","loading","setLoading","error","setError","useContext","history","useHistory","roomId","useParams","onKeyDown","ev","key","onChange","hostHandler","fetch","method","body","JSON","stringify","headers","Accept","then","res","ok","json","userInfo","push","roomInfo","catch","err","PlayerHandler","Results","setIsOpen","animation","setAnimation","display","alignItems","onAnimationEnd","map","item","ResultWrapper","Image","picture_medium","ResultsInfo","Title","title","Tracks","nb_tracks","Open","Close","img","p","ip","Search","searchTerm","setSearchTerm","isOpen","SearchPlaylist","TopBar","placeholder","string","split","join","searchToUrl","SpinnerPosition","SelectedPlaylist","Icon","Users","addUserRef","removeUserRef","previousPlayers","useRef","current","usePrevious","isCopied","setIsCopied","play","addUser","List","index","User","navigator","clipboard","writeText","window","ColorsAnimation","Props","SelectedPlaylistPlayer","VolumeButton","volume","setVolume","SlidderWrapper","Slider","min","max","validatePlaylist","Promise","resolve","reject","promise","BottomSection","ButtonWrapper","BigButton","ErrorAnimation","ErrorMessage","Text","HostLobby","keys","ErrorScreen","message","spinner","Message","GameInProgress","RoundCounter","RoundSpan","span","LobbyWrapper","roomRef","exists","replace","SignIn","ProgressBar","barRef","calculateGuessPosition","position","clientWidth","toFixed","Bar","guess","Guess","Tip","Cassette","setArtist","setSongName","name","title_short","MasterWrapper","cassette","Counter","CogWrapper","Cog","Peg1","Peg2","Peg3","Peg4","CogWrapper2","Label","SongName","PlaceHolder","SongNameSpan","Separator","ArtistSpan","Appear","calculateDistance","artistOrSongName","valueToSearch","artistOrSong","toLowerCase","wordsArray","allSubStrings","forEach","word","i","trim","newArray","slice","ArtistResultMap","searchingFor","distance","leven","marginOfError","Math","floor","fetchHelper","SearchBar","wrongRef","correctRef","successRef","placeHolderText","setPlaceHolderText","wrong","correct","success","artistResult","songNameResult","timeStamp","Date","getTime","previousGuess","Fail","PreviousSong","SongListWrapper","song","SongInfoWrapper","SongArt","album","cover_medium","InfoSection","Artist","reverse","Ranking","UsersListWrapper","UserWrapper","InfoWrapper","Rank","UserInfoWrapper","NameWrapper","UserName","CorrectGuessWrapper","usersCorrectGuess","ScoreInfoWrapper","Score","h1","asyncRequest","currentPhase","accept","Player","audio","GameRoom","setTime","audioRef","interval","workerTimers","phase","pause","currentTrackInfo","preview","GameOverScreen","ButtonsWrapper","GameRoomWrapper","GameOver","GlobalStyle","createGlobalStyle","App","exact","path","HostHandler","GlobalStyles","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.364ac264.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/textured_background_green.0119cb90.jpg\";","module.exports = __webpack_public_path__ + \"static/media/y.89c0c5ef.svg\";","module.exports = __webpack_public_path__ + \"static/media/jamie.0f4d71c1.svg\";","module.exports = __webpack_public_path__ + \"static/media/100-fireworks.e9a77e7b.gif\";","module.exports = __webpack_public_path__ + \"static/media/add2.d31c69da.mp3\";","module.exports = __webpack_public_path__ + \"static/media/remove2.120df319.mp3\";","module.exports = __webpack_public_path__ + \"static/media/cassette.9ea9d06a.png\";","module.exports = __webpack_public_path__ + \"static/media/wrong.47687ae3.mp3\";","module.exports = __webpack_public_path__ + \"static/media/correct.ea8e8063.mp3\";","module.exports = __webpack_public_path__ + \"static/media/success.0c5e0bb9.mp3\";","import React, { createContext } from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const FireBaseContext = createContext(null);\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyCvDktR2m3-rIU3ddPsLkqT2Yfp4EASteA\",\r\n  authDomain: \"you-beat-me-to-it.firebaseapp.com\",\r\n  databaseURL: \"https://you-beat-me-to-it.firebaseio.com\",\r\n  projectId: \"you-beat-me-to-it\",\r\n  storageBucket: \"you-beat-me-to-it.appspot.com\",\r\n  messagingSenderId: \"1075878771170\",\r\n  appId: \"1:1075878771170:web:253cca6ef4a7e1e7a8e1bb\",\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst FireBaseContextProvider = ({ children }) => {\r\n  return (\r\n    <FireBaseContext.Provider firebaseApp={firebaseApp}>\r\n      {children}\r\n    </FireBaseContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FireBaseContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const CurrentUserContext = React.createContext(null);\r\n\r\nconst CurrentUserContextProvider = ({ children }) => {\r\n  const [currentRoomId, setCurrentRoomId] = React.useState(null);\r\n  const [currentUser, setCurrentUser] = React.useState(null);\r\n  const [usersList, setUsersList] = React.useState(null);\r\n  const [correctGuess, setCorrectGuess] = React.useState({\r\n    artist: false,\r\n    songName: false,\r\n    time: null,\r\n  });\r\n  const [currentTrackGuesses, setCurrentTrackGuesses] = React.useState({});\r\n  const [isHostPresent, setIsHostPresent] = React.useState(undefined);\r\n  console.log(\"isHostPresentContext\", isHostPresent);\r\n  console.log(\"currentRoomId\", currentRoomId);\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser && usersList) {\r\n      const RoomRef = firebase.database().ref(`Rooms/${currentRoomId}`);\r\n      if (usersList.length === 1) {\r\n        RoomRef.onDisconnect().remove();\r\n      } else {\r\n        RoomRef.onDisconnect().cancel();\r\n      }\r\n      const playerRef = firebase\r\n        .database()\r\n        .ref(`Rooms/${currentRoomId}/players/${currentUser.playerId}`);\r\n\r\n      playerRef.onDisconnect().remove();\r\n    }\r\n  }, [currentUser, currentRoomId, usersList]);\r\n\r\n  React.useEffect(() => {\r\n    if (currentRoomId) {\r\n      const PlayersRef = firebase\r\n        .database()\r\n        .ref(`Rooms/${currentRoomId}/players`);\r\n      PlayersRef.on(\"value\", (snapshot) => {\r\n        const players = snapshot.val();\r\n        console.log(\"players\", players);\r\n        if (players === null) {\r\n          setIsHostPresent(false);\r\n        }\r\n        if (players) {\r\n          const SortedArray = Object.values(players).sort((a, b) => {\r\n            return b.points - a.points;\r\n          });\r\n          let host = SortedArray.find((user) => {\r\n            if (user.role === \"host\") {\r\n              return true;\r\n            }\r\n          });\r\n          console.log(\"host\", host);\r\n          if (host) {\r\n            setIsHostPresent(true);\r\n          } else {\r\n            setIsHostPresent(false);\r\n          }\r\n          setUsersList(SortedArray);\r\n        }\r\n      });\r\n    }\r\n  }, [setUsersList, currentRoomId]);\r\n\r\n  React.useEffect(() => {\r\n    const currentGuessesRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${currentRoomId}/currentTrack/correctGuesses`);\r\n\r\n    currentGuessesRef.on(\"value\", (snapshot) => {\r\n      setCurrentTrackGuesses(snapshot.val());\r\n    });\r\n  }, [currentRoomId]);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider\r\n      value={{\r\n        currentUser,\r\n        setCurrentUser,\r\n        usersList,\r\n        setUsersList,\r\n        correctGuess,\r\n        setCorrectGuess,\r\n        setCurrentRoomId,\r\n        currentTrackGuesses,\r\n        isHostPresent,\r\n      }}\r\n    >\r\n      {children}\r\n    </CurrentUserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CurrentUserContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const LobbyContext = React.createContext(null);\r\n\r\nconst initialState = {\r\n  searchResults: null,\r\n  selectedPlaylist: {},\r\n  loadState: \"idle\",\r\n};\r\n\r\nfunction Reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"start-search\": {\r\n      return { ...state, loadState: \"loading\" };\r\n    }\r\n    case \"receive-playlists\": {\r\n      return { ...state, searchResults: action.playlist, loadState: \"idle\" };\r\n    }\r\n    case \"select-playlist\": {\r\n      const selectedPlaylist = { [action.playlist.id]: action.playlist };\r\n      return { ...state, selectedPlaylist: selectedPlaylist };\r\n    }\r\n    case \"delete-playlist\": {\r\n      return { ...state, selectedPlaylist: {} };\r\n    }\r\n    default:\r\n      throw new Error(\"Unrecognized Action\");\r\n  }\r\n}\r\n\r\nconst LobbyContextProvider = ({ children }) => {\r\n  const [playlistState, dispatch] = React.useReducer(Reducer, initialState);\r\n  const [roomIdState, setRoomId] = React.useState(null);\r\n  const [location, setLocation] = React.useState(\"lobby\");\r\n  const [roomExists, setRoomExists] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    const roomLocationRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${roomIdState}/roomLocation`);\r\n\r\n    roomLocationRef.on(\"value\", (snapshot) => {\r\n      let locationFromDatabase = snapshot.val();\r\n\r\n      setLocation(locationFromDatabase);\r\n    });\r\n    return () => {\r\n      roomLocationRef.off();\r\n    };\r\n  }, [roomIdState, location]);\r\n\r\n  const startSearch = () => {\r\n    dispatch({ type: \"start-search\" });\r\n  };\r\n\r\n  const receivePlaylists = (data) => {\r\n    dispatch({ type: \"receive-playlists\", playlist: data });\r\n  };\r\n\r\n  const selectPlaylist = (data) => {\r\n    dispatch({ type: \"select-playlist\", playlist: data });\r\n  };\r\n\r\n  const deletePlaylist = (data) => {\r\n    dispatch({ type: \"delete-playlist\" });\r\n  };\r\n  return (\r\n    <LobbyContext.Provider\r\n      value={{\r\n        playlistState,\r\n        startSearch,\r\n        receivePlaylists,\r\n        selectPlaylist,\r\n        deletePlaylist,\r\n        roomIdState,\r\n        setRoomId,\r\n        location,\r\n        roomExists,\r\n        setRoomExists,\r\n      }}\r\n    >\r\n      {children}\r\n    </LobbyContext.Provider>\r\n  );\r\n};\r\n\r\nexport default LobbyContextProvider;\r\n","import React from \"react\";\r\nimport * as firebase from \"firebase\";\r\n\r\nexport const GameRoomContext = React.createContext(null);\r\n\r\nconst GameRoomContextProvider = ({ children }) => {\r\n  const [trackUrl, setTrackUrl] = React.useState(null);\r\n  const [gamePhase, setGamePhase] = React.useState(null);\r\n  const [trackInfo, setTrackInfo] = React.useState(null);\r\n  const [historyArray, setHistoryArray] = React.useState([]);\r\n  const [result, setResult] = React.useState(null);\r\n  const [round, setRound] = React.useState(0);\r\n  const [GameRoomId, setRoomId] = React.useState(null);\r\n  const [gameRoomExists, setGameRoomExists] = React.useState(undefined);\r\n  const [gameStarted, setGameStarted] = React.useState(false);\r\n\r\n  console.log(\"inContextPhase\", gamePhase);\r\n\r\n  React.useEffect(() => {\r\n    const roundRef = firebase.database().ref(`Rooms/${GameRoomId}/round`);\r\n    roundRef.on(\"value\", (snapshot) => {\r\n      setRound(snapshot.val());\r\n    });\r\n\r\n    return () => {\r\n      const roundRef = firebase.database().ref(`Rooms/${GameRoomId}/round`);\r\n      roundRef.off();\r\n    };\r\n  }, [GameRoomId]);\r\n\r\n  React.useEffect(() => {\r\n    if (trackInfo) {\r\n      setHistoryArray([...historyArray, trackInfo]);\r\n    }\r\n  }, [trackInfo]);\r\n\r\n  return (\r\n    <GameRoomContext.Provider\r\n      value={{\r\n        trackUrl,\r\n        setTrackUrl,\r\n        gamePhase,\r\n        setGamePhase,\r\n        trackInfo,\r\n        setTrackInfo,\r\n        result,\r\n        setResult,\r\n        historyArray,\r\n        setHistoryArray,\r\n        round,\r\n        setRound,\r\n        setRoomId,\r\n        gameRoomExists,\r\n        setGameRoomExists,\r\n        gameStarted,\r\n        setGameStarted,\r\n      }}\r\n    >\r\n      {children}\r\n    </GameRoomContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GameRoomContextProvider;\r\n","const COLORS = {\r\n  main: \"#19533c\",\r\n  secondary: \"#000\",\r\n  tertiary: \"#19533c\",\r\n  // midnight: \"#893dd4\",\r\n  midnight: \"#fff0c3\",\r\n};\r\n\r\nexport default COLORS;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { AiFillGithub } from \"react-icons/ai\";\r\nimport background from \"../../assets/textured_background_green.jpg\";\r\n\r\nimport logo from \"../../assets/y.svg\";\r\nconst Background = ({ children }) => {\r\n  return (\r\n    <Wrapper style={{ backgroundImage: `url(${background})` }}>\r\n     \r\n      <ChildWrapper>{children}</ChildWrapper>\r\n      <Footer>\r\n        \r\n        <Link\r\n          href=\"https://freetoair.now.sh\"\r\n          target=\"_blank\"\r\n        >\r\n          <img src={logo} alt=\"Logo\"  style={{height:30}}/>\r\n        </Link>\r\n      </Footer>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  background-color: ${COLORS.main};\r\n  position: relative;\r\n  overflow: hidden;\r\n  background-size: cover;\r\n  \r\n`;\r\n\r\nconst Shape1 = styled.div`\r\n  width: 500px;\r\n  height: 800px;\r\n  border-radius: 50%;\r\n  transform: rotate(20deg);\r\n  position: absolute;\r\n  top: -400px;\r\n  left: -100px;\r\n  background-color: ${COLORS.secondary};\r\n`;\r\n\r\nconst Shape2 = styled.div`\r\n  width: 500px;\r\n  height: 500px;\r\n  transform: rotate(55deg);\r\n  position: absolute;\r\n  bottom: -450px;\r\n  right: 300px;\r\n  background-color: ${COLORS.tertiary};\r\n`;\r\n\r\nconst Shape3 = styled.div`\r\n  border-bottom: 400px solid ${COLORS.midnight};\r\n  border-left: 55px solid transparent;\r\n  border-right: 55px solid transparent;\r\n  height: 0px;\r\n  width: 350px;\r\n  position: absolute;\r\n  right: -150px;\r\n  top: 20%;\r\n  transform: rotate(70deg);\r\n`;\r\n\r\nconst ChildWrapper = styled.div`\r\n  position: relative;\r\n  z-index: 3;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst Footer = styled.div`\r\n  position: absolute;\r\n  color: white;\r\n  right: 15px;\r\n  bottom: 15px;\r\n  font-size: 20px;\r\n  z-index: 3;\r\n`;\r\n\r\nconst Link = styled.a`\r\n  color: white;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  margin-left: 5px;\r\n`;\r\nexport default Background;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\nimport logo from \"../../assets/jamie.svg\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    \r\n    <Wrapper href={\"/\"}>\r\n     <img src={logo} alt=\"Logo\"  style={{height:90}}/>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.a`\r\n  display: block;\r\n  text-decoration: none;\r\n  position: relative;\r\n  text-align: center;\r\n  width: fit-content;\r\n  color: white;\r\n  font-size: 100px;\r\n  font-family: \"Echizen\";\r\n  margin: 0 auto;\r\n  margin-top: 25px;\r\n  margin-bottom: 50px;\r\n  text-shadow: 2px 2px 0px ${COLORS.midnight};\r\n  line-height: 70%;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Beat = styled.div`\r\n  /* background: linear-gradient(\r\n    to right,\r\n    ${COLORS.tertiary},\r\n    ${COLORS.secondary}\r\n  ); */\r\n  display: block;\r\n  width: fit-content;\r\n  margin: 0 auto;\r\n  /* transform: skew(9deg); */\r\n  padding: 0px 5px;\r\n  color: ${COLORS.midnight};\r\n  text-shadow: 2px 2px 0px white;\r\n  /* border-bottom: 5px solid ${COLORS.midnight}; */\r\n  font-family: \"Echizen\";\r\n`;\r\n\r\nconst Shape = styled.div`\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 150px solid transparent;\r\n  border-right: 150px solid transparent;\r\n  border-bottom: 250px solid #ff33be;\r\n  /* border-bottom: 250px solid ${COLORS.tertiary}; */\r\n  position: absolute;\r\n  z-index: -3;\r\n  top: -20px;\r\n  left: -20px;\r\n`;\r\n\r\n// const Beat = styled.span`\r\n//   background: -webkit-linear-gradient(${COLORS.tertiary}, ${COLORS.secondary});\r\n//   -webkit-background-clip: text;\r\n//   -webkit-text-fill-color: transparent;\r\n//   font-family: \"Echizen\";\r\n// `;\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst GenericLabel = ({ children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Content>{children}</Content>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  transform: skew(9deg);\r\n  background: transparent;\r\n  font-size: 40px;\r\n  padding: 5px;\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  transform: skew(-9deg);\r\n  font-weight: 700;\r\n  color: #fff0c3;\r\n`;\r\n\r\nexport default GenericLabel;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst Button = ({ children, handler, disabled }) => {\r\n  return (\r\n    <StyledButton onClick={handler} disabled={disabled}>\r\n      {children}\r\n    </StyledButton>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n\r\nconst StyledButton = styled.button`\r\n  height: 50px;\r\n  border-radius: 30px;\r\n  font-weight: 700;\r\n  padding: 5px 20px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: #000;\r\n  backdrop-filter: none;\r\n  transition: filter 0.3s;\r\n\r\n  :hover {\r\n    filter: saturate(150%);\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { FiLoader } from \"react-icons/fi\";\r\n\r\nconst Spinner = ({ size, color }) => {\r\n  return (\r\n    <Wrapper color={color}>\r\n      <SpinWheel size={size} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n  color: ${(props) => props.color};\r\n`;\r\n\r\nconst Spin = keyframes`\r\nfrom{\r\n  transform: rotate(0deg)\r\n}to{\r\n  transform: rotate(360deg)\r\n}`;\r\n\r\nconst SpinWheel = styled(FiLoader)`\r\n  animation: ${Spin} 2000ms linear infinite;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport Button from \"../Button/Button\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport logo from \"../../assets/100-fireworks.gif\";\r\n\r\nconst SignInHost = ({ buttonHandler, buttonMessage }) => {\r\n  console.log(\"inSignIn\");\r\n  const [nickName, setNickName] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const { setCurrentUser } = React.useContext(CurrentUserContext);\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  return (\r\n    <Wrapper>\r\n      <img src={logo} alt=\"Logo\"  style={{height:300}}/>\r\n      <GenericLabel>Username:</GenericLabel>\r\n      <Input\r\n        value={nickName}\r\n        onKeyDown={(ev) => {\r\n          if (ev.key === \"Enter\" && nickName.length >= 1 && !loading) {\r\n            setLoading(true);\r\n            buttonHandler({\r\n              nickName,\r\n              setNickName,\r\n              setCurrentUser,\r\n              history,\r\n              roomId,\r\n              setLoading,\r\n              setError,\r\n            });\r\n          }\r\n        }}\r\n        onChange={(ev) => {\r\n          if (ev.target.value.length > 30) {\r\n          } else {\r\n            setNickName(ev.target.value);\r\n          }\r\n        }}\r\n      />\r\n      <Button\r\n        disabled={nickName.length < 1 || loading}\r\n        handler={() => {\r\n          setLoading(true);\r\n          buttonHandler({\r\n            nickName,\r\n            setNickName,\r\n            setCurrentUser,\r\n            history,\r\n            roomId,\r\n            setLoading,\r\n            setError,\r\n          });\r\n        }}\r\n      >\r\n        {loading ? <Spinner /> : buttonMessage}\r\n      </Button>\r\n      {error && (\r\n        <Error>Something went wrong, please refresh and try again</Error>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  margin-top: 30px;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  \r\n`;\r\n\r\n\r\nconst Input = styled.input`\r\n  width: 300px;\r\n  height: 50px;\r\n  color: black;\r\n  border-radius: 30px;\r\n  border: none;\r\n  text-align: center;\r\n  font-size: 40px;\r\n  margin-bottom: 15px;\r\n  \r\n\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 5px black;\r\n  }\r\n`;\r\n\r\nconst Error = styled.div`\r\n  font-size: 20px;\r\n  color: white;\r\n`;\r\n\r\nexport default SignInHost;\r\n","const hostHandler = ({\r\n  nickName,\r\n  setNickName,\r\n  setCurrentUser,\r\n  history,\r\n  setLoading,\r\n  setError,\r\n}) => {\r\n  setLoading(true);\r\n  fetch(\"https://you-beat-me-to-it.herokuapp.com/createRoom\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      nickName: nickName,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) {\r\n        throw new Error(\"Something went wrong, refresh and try again\");\r\n      }\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      console.log(data);\r\n      setNickName(\"\");\r\n      setCurrentUser(data.userInfo);\r\n      setLoading(false);\r\n      history.push(`/lobby/${data.roomInfo.roomId}`);\r\n    })\r\n    .catch((err) => {\r\n      setLoading(false);\r\n      setError(err);\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport default hostHandler;\r\n","const PlayerHandler = ({\r\n  nickName,\r\n  setNickName,\r\n  setCurrentUser,\r\n  history,\r\n  roomId,\r\n  setLoading,\r\n  setError,\r\n}) => {\r\n  setLoading(true);\r\n  fetch(`https://you-beat-me-to-it.herokuapp.com/${roomId}/createUser`, {\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      nickName: nickName,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) {\r\n        throw new Error(\"Something went wrong, please try again\");\r\n      }\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      setNickName(\"\");\r\n      setLoading(false);\r\n      setCurrentUser(data.userInfo);\r\n    })\r\n    .catch((err) => {\r\n      setLoading(false);\r\n      setError(err);\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport default PlayerHandler;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\n\r\nconst Results = ({ setIsOpen }) => {\r\n  const { playlistState, selectPlaylist } = React.useContext(LobbyContext);\r\n  const [animation, setAnimation] = React.useState(\"open\");\r\n\r\n  if (playlistState.searchResults.length === 0) {\r\n    return (\r\n      <Wrapper\r\n        style={{ height: \"50px\", display: \"flex\", alignItems: \"center\" }}\r\n        animation={animation}\r\n        onAnimationEnd={() => {\r\n          if (animation === \"close\") {\r\n            setIsOpen(false);\r\n          }\r\n        }}\r\n      >\r\n        No Results found\r\n      </Wrapper>\r\n    );\r\n  }\r\n  return (\r\n    <Wrapper\r\n      animation={animation}\r\n      onAnimationEnd={() => {\r\n        if (animation === \"close\") {\r\n          setIsOpen(false);\r\n        }\r\n      }}\r\n    >\r\n      {playlistState.searchResults.map((item) => {\r\n        return (\r\n          <ResultWrapper\r\n            key={item.id}\r\n            onClick={() => {\r\n              selectPlaylist(item);\r\n              // setIsOpen(false);\r\n              setAnimation(\"close\");\r\n            }}\r\n          >\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Results;\r\n\r\nconst Open = keyframes`\r\nfrom{\r\n  transform: scaleY(0)\r\n}to{\r\n  transform: scaleY(1)\r\n}\r\n`;\r\n\r\nconst Close = keyframes`\r\nfrom{\r\n  transform: scaleY(1)\r\n}to{\r\n  transform: scaleY(0)\r\n}\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 50%;\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  max-height: 300px;\r\n  overflow: scroll;\r\n  color: black;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  background: transparent;\r\n  margin-bottom: 15px;\r\n  overflow-x: hidden;\r\n  transform-origin: top;\r\n  animation: ${(props) => (props.animation === \"open\" ? Open : Close)} 220ms\r\n    ease-in-out;\r\n  animation-fill-mode: forwards;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  width: 50%;\r\n  display: flex;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n  :hover {\r\n    background: #eadaf0;\r\n  }\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 90%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n","export const ip = \"https://you-beat-me-to-it.herokuapp.com\";\r\n// export const ip = \"http://localhost:8000\";\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\n// import Button from \"../Button/Button\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport Results from \"./Results\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { ip } from \"../../ip\";\r\n\r\nfunction searchToUrl(searchTerm) {\r\n  const searchArray = searchTerm.split(\" \");\r\n  const searchString = searchArray.join(\"%20\");\r\n  return searchString;\r\n}\r\n\r\nconst Search = () => {\r\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\r\n  const [isOpen, setIsOpen] = React.useState(\"false\");\r\n  const { playlistState, startSearch, receivePlaylists } = React.useContext(\r\n    LobbyContext\r\n  );\r\n  return (\r\n    <SearchPlaylist>\r\n      <GenericLabel>Search for a playlist:</GenericLabel>\r\n      <TopBar>\r\n        <Input\r\n          value={searchTerm}\r\n          placeholder=\"Eg: Jamie Jams\"\r\n          onChange={(ev) => setSearchTerm(ev.target.value)}\r\n          onKeyDown={(ev) => {\r\n            switch (ev.key) {\r\n              case \"Enter\": {\r\n                if (searchTerm.length > 1) {\r\n                  startSearch();\r\n                  let string = searchToUrl(searchTerm);\r\n                  fetch(`${ip}/searchPlaylist?searchTerm=${string}`, {\r\n                    method: \"GET\",\r\n                    headers: {\r\n                      Accept: \"application/json\",\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                  })\r\n                    .then((res) => res.json())\r\n                    .then((data) => {\r\n                      receivePlaylists(data.searchResults);\r\n                      setIsOpen(true);\r\n                    });\r\n                }\r\n                break;\r\n              }\r\n              default: {\r\n              }\r\n            }\r\n          }}\r\n        />\r\n        {playlistState.loadState === \"loading\" && (\r\n          <SpinnerPosition>\r\n            <Spinner size={35} color={\"grey\"} />\r\n          </SpinnerPosition>\r\n        )}\r\n      </TopBar>\r\n      {playlistState.loadState === \"idle\" &&\r\n      playlistState.searchResults !== null &&\r\n      isOpen === true ? (\r\n        <Results setIsOpen={setIsOpen} />\r\n      ) : null}\r\n    </SearchPlaylist>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n\r\nconst SearchPlaylist = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  width: 100%;\r\n`;\r\n\r\nconst TopBar = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n  position: relative;\r\n`;\r\n\r\nconst SpinnerPosition = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  align-items: center;\r\n  right: 650px;\r\n  top: 20px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 50%;\r\n  height: 55px;\r\n  color: black;\r\n  border-radius: 40px;\r\n  border: none;\r\n  left:50%;\r\n  text-align: left;\r\n  font-size: 40px;\r\n  padding: 0 30px;\r\n  margin-top: 10px;\r\n  \r\n  \r\n\r\n  :focus {\r\n    outline: none;\r\n    border: 1px solid red;\r\n  }\r\n\r\n  &::placeholder {\r\n    color: #eadaf0;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { FiX } from \"react-icons/fi\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst SelectedPlaylist = () => {\r\n  const { playlistState, deletePlaylist } = React.useContext(LobbyContext);\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    fetch(`${ip}/updatePlaylist`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({\r\n        selectedPlaylist: playlistState.selectedPlaylist,\r\n        roomId: roomId,\r\n      }),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [playlistState.selectedPlaylist, roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Selected Playlist:</GenericLabel>\r\n      {Object.values(playlistState.selectedPlaylist).map((item) => {\r\n        return (\r\n          <ResultWrapper key={item.id} onClick={() => {}}>\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n            <Icon\r\n              onClick={(ev) => {\r\n                deletePlaylist(item);\r\n              }}\r\n            >\r\n              <FiX size={35} color={\"lightgray\"} />\r\n            </Icon>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectedPlaylist;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  padding-right: 20px;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  background: transparent;\r\n  border-radius: 15px;\r\n  width: fit-content;\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  position: relative;\r\n  min-width: 50%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n  border-radius: 50%;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 80%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 10;\r\n  color: lightgrey;\r\n`;\r\n\r\nconst Icon = styled.button`\r\n  color: red;\r\n  position: absolute;\r\n  border: none;\r\n  cursor: pointer;\r\n  top: 0;\r\n  right: 0;\r\n  background: none;\r\n`;\r\n","import React, { useRef } from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { GiBeerBottle } from \"react-icons/gi\";\r\nimport addUser from \"../../assets/sounds/add2.mp3\";\r\nimport remove from \"../../assets/sounds/remove2.mp3\";\r\n\r\nfunction usePrevious(value) {\r\n  const ref = useRef();\r\n\r\n  React.useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]); // Only re-run if value changes\r\n\r\n  return ref.current;\r\n}\r\n\r\nconst Users = ({ addUserRef, removeUserRef }) => {\r\n  const { usersList, currentUser, setCurrentRoomId } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const previousPlayers = usePrevious(usersList);\r\n\r\n  const { roomId } = useParams();\r\n  const [isCopied, setIsCopied] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (previousPlayers) {\r\n      if (previousPlayers.length > usersList.length) {\r\n        console.log(\"lost a player\");\r\n        removeUserRef.current.play();\r\n      } else {\r\n        console.log(\"won a player\");\r\n        addUserRef.current.play();\r\n      }\r\n    }\r\n  }, [usersList, addUserRef]);\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <audio src={addUser} ref={addUserRef}></audio>\r\n      <audio src={remove} ref={removeUserRef}></audio>\r\n      <GenericLabel>Players:</GenericLabel>\r\n      {usersList !== null ? (\r\n        <List>\r\n          {usersList.map((user, index) => {\r\n            return (\r\n              <User\r\n                key={user.nickName + index}\r\n                style={{\r\n                  color: `${\r\n                    currentUser.playerId === user.playerId\r\n                      ? COLORS.midnight\r\n                      : \"black\"\r\n                  }`,\r\n                }}\r\n              >\r\n                {user.role === \"host\" ? (\r\n                  <Icon>\r\n                    <GiBeerBottle />\r\n                  </Icon>\r\n                ) : null}\r\n                {user.nickName}\r\n              </User>\r\n            );\r\n          })}\r\n          <StyledButton\r\n            isCopied={isCopied}\r\n            onClick={() => {\r\n              setIsCopied(true);\r\n              navigator.clipboard.writeText(window.location);\r\n            }}\r\n            onAnimationEnd={() => {\r\n              setIsCopied(false);\r\n            }}\r\n          >\r\n            {isCopied ? \"Copied !\" : \"Share Invite Link\"}\r\n          </StyledButton>\r\n        </List>\r\n      ) : null}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n`;\r\n\r\nconst List = styled.div`\r\n  background: transparent;\r\n  border-radius: 15px;\r\n  padding: 10px 30px;\r\n  min-width: 50%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst User = styled.div`\r\n  margin-bottom: 5px;\r\n  position: relative;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  left: 0;\r\n  transform: translateX(-100%);\r\n  margin: 0;\r\n`;\r\n\r\nconst ColorsAnimation = keyframes`\r\n0%{\r\n  background-position: 0% 0%;\r\n  );\r\n}20%{\r\n  background-position: 100% 0%;\r\n} 80% {\r\n  background-position: 100% 0%;\r\n}\r\n100%{\r\n  background-position: 0% 0%;\r\n}`;\r\n\r\nconst StyledButton = styled.button`\r\n  height: 50px;\r\n  margin-top:20px;\r\n  border-radius: 30px;\r\n  font-weight: 700;\r\n  width: 80%;\r\n  padding: 5px 20px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: #000;\r\n  background-size: 300% 100%;\r\n  overflow: hidden;\r\n  animation: ${(Props) => (Props.isCopied ? ColorsAnimation : null)} 2000ms\r\n    ease-in-out;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst SelectedPlaylistPlayer = () => {\r\n  const { playlistState, selectPlaylist, deletePlaylist } = React.useContext(\r\n    LobbyContext\r\n  );\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    const selectedPlaylistRef = firebase\r\n      .database()\r\n      .ref(`Rooms/${roomId}/selectedPlaylist`);\r\n\r\n    selectedPlaylistRef.on(\"value\", (snapshot) => {\r\n      const playlist = snapshot.val();\r\n\r\n      if (playlist === false) {\r\n        deletePlaylist();\r\n      } else if (playlist) {\r\n        selectPlaylist(Object.values(playlist)[0]);\r\n      }\r\n    });\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Selected Playlist:</GenericLabel>\r\n      {Object.values(playlistState.selectedPlaylist).map((item) => {\r\n        return (\r\n          <ResultWrapper key={item.id}>\r\n            <Image src={item.picture_medium} />\r\n            <ResultsInfo>\r\n              <Title>{item.title}</Title>\r\n              <Tracks>{item.nb_tracks} tracks</Tracks>\r\n            </ResultsInfo>\r\n          </ResultWrapper>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectedPlaylistPlayer;\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  padding-right: 20px;\r\n`;\r\n\r\nconst ResultWrapper = styled.div`\r\n  background: transparent;\r\n  border-radius: 15px;\r\n  width: fit-content;\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 10px;\r\n  position: relative;\r\n  min-width: 50%;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ResultsInfo = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  width: 80%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst Tracks = styled.p`\r\n  font-size: 70%;\r\n  font-weight: 400;\r\n  color: lightgrey;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { FiVolume, FiVolumeX, FiVolume1, FiVolume2 } from \"react-icons/fi\";\r\n\r\nconst VolumeButton = ({ volume, setVolume }) => {\r\n  return (\r\n    <SlidderWrapper>\r\n      <Button\r\n        onClick={() => {\r\n          if (volume > 0) {\r\n            setVolume(0);\r\n            return;\r\n          }\r\n          if (volume === 0) {\r\n            setVolume(0.5);\r\n            return;\r\n          }\r\n        }}\r\n      >\r\n        {volume === 0.5 && <FiVolume size={35} />}\r\n        {volume === 0 && <FiVolumeX size={35} />}\r\n        {volume < 0.5 && volume > 0 && <FiVolume1 size={35} />}\r\n        {volume > 0.5 && <FiVolume2 size={35} />}\r\n      </Button>\r\n      <Slider\r\n        type=\"range\"\r\n        min=\"0\"\r\n        max=\"100\"\r\n        value={volume * 100}\r\n        onChange={(ev) => {\r\n          setVolume(ev.target.value / 100);\r\n        }}\r\n      />\r\n    </SlidderWrapper>\r\n  );\r\n};\r\n\r\nexport default VolumeButton;\r\n\r\nconst Slider = styled.input`\r\n  width: 100%;\r\n`;\r\n\r\nconst SlidderWrapper = styled.div`\r\n  display: flex;\r\n  padding: 5px;\r\n  align-items: center;\r\n  background: transparent;\r\n  border-radius: 10px;\r\n  width: 55px;\r\n  transition: width 1s, opacity 1s;\r\n  margin-bottom: 15px;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 40px;\r\n\r\n  input:nth-child(2) {\r\n    opacity: 0;\r\n    transition: opacity 0.8s;\r\n  }\r\n\r\n  :hover {\r\n    width: 200px;\r\n    input:nth-child(2) {\r\n      opacity: 1;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background: none;\r\n  border: none;\r\n  width: 50px;\r\n  height: 50px;\r\n  cursor: pointer;\r\n  color: #fff0c3;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Search from \"./Search\";\r\nimport SelectedPlaylist from \"./SelectedPlaylist\";\r\nimport Users from \"./Users\";\r\nimport SelectedPlaylistPlayer from \"./SelectedPlaylistPlayer\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport VolumeButton from \"../Button/VolumeButton\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { ip } from \"../../ip\";\r\n//added a comment\r\nconst validatePlaylist = async (roomId, playlist) => {\r\n  const promise = await new Promise((resolve, reject) => {\r\n    fetch(`${ip}/validatePlaylist`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ roomId, selectedPlaylist: playlist }),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        resolve(data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        reject(err);\r\n      });\r\n  });\r\n\r\n  return promise;\r\n};\r\n\r\nconst HostLobby = () => {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const { currentUser } = React.useContext(CurrentUserContext);\r\n  const { playlistState, location } = React.useContext(LobbyContext);\r\n  const { gameStarted } = React.useContext(GameRoomContext);\r\n  const { roomId } = useParams();\r\n  const history = useHistory();\r\n  const addUserRef = React.useRef(null);\r\n  const removeUserRef = React.useRef(null);\r\n  const [volume, setVolume] = React.useState(0.5);\r\n\r\n  React.useEffect(() => {\r\n    if (addUserRef.current && removeUserRef.current) {\r\n      addUserRef.current.volume = volume;\r\n      removeUserRef.current.volume = volume;\r\n    }\r\n  }, [addUserRef, removeUserRef, volume]);\r\n\r\n  React.useEffect(() => {\r\n    if (location === \"gameRoom\" && gameStarted === false) {\r\n      history.push(`/gameroom/${roomId}`);\r\n    }\r\n  }, [roomId, location]);\r\n\r\n  if (currentUser.role === \"player\") {\r\n    return (\r\n      <Wrapper>\r\n        <VolumeButton volume={volume} setVolume={setVolume} />\r\n        <BottomSection>\r\n          <SelectedPlaylistPlayer />\r\n          <Users addUserRef={addUserRef} removeUserRef={removeUserRef} />\r\n        </BottomSection>\r\n        <Text>\r\n          Please wait for the host to select a playlist and to start game ...\r\n        </Text>\r\n      </Wrapper>\r\n    );\r\n  }\r\n  return (\r\n    <Wrapper>\r\n      <VolumeButton volume={volume} setVolume={setVolume} />\r\n      <Search />\r\n      <BottomSection>\r\n        <SelectedPlaylist />\r\n        <Users removeUserRef={removeUserRef} addUserRef={addUserRef} />\r\n      </BottomSection>\r\n      <ButtonWrapper>\r\n        {error && <ErrorMessage>Please select a playlist</ErrorMessage>}\r\n        <BigButton\r\n          onClick={async () => {\r\n            if (Object.keys(playlistState.selectedPlaylist).length > 0) {\r\n              setError(false);\r\n              setLoading(true);\r\n              await validatePlaylist(roomId, playlistState.selectedPlaylist);\r\n            } else {\r\n              setError(true);\r\n            }\r\n          }}\r\n        >\r\n          {loading ? <Spinner /> : \"Start Game\"}\r\n        </BigButton>\r\n      </ButtonWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nconst Wrapper = styled.div`\r\n  margin-top: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 40px;\r\n  /* align-items: center; */\r\n`;\r\n\r\nconst BottomSection = styled.div`\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 50% 50%;\r\n`;\r\n\r\nconst ButtonWrapper = styled.div`\r\n  margin: 50px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  position: relative;\r\n`;\r\n\r\nconst BigButton = styled.button`\r\n  border-radius: 30px;\r\n  /* font-weight: 700; */\r\n  /* font-family: \"Echizen\"; */\r\n  font-size: 40px;\r\n  padding: 5px 20px;\r\n  cursor: pointer;\r\n  color: white;\r\n  border: none;\r\n  background: #000;\r\n  transition: filter 0.3s;\r\n\r\n  :hover {\r\n    filter: saturate(150%);\r\n  }\r\n  :focus {\r\n    outline: none;\r\n    border: 1px solid white;\r\n    border-radius: 30px;\r\n  }\r\n`;\r\n\r\nconst ErrorAnimation = keyframes`\r\nfrom{\r\n  opacity: 0;\r\n  transform: translateY(100%)\r\n}to{\r\n  opacity: 1;\r\n  transform: translateY(0%)\r\n}`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  font-size: 20px;\r\n  color: white;\r\n  animation: ${ErrorAnimation} 200ms ease-in-out;\r\n  position: absolute;\r\n  top: -25px;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  \r\n  font-size: 60px;\r\n  text-align: center;\r\n  color: #fff0c3;\r\n  margin: 50px 0;\r\n  text-shadow: 2px 2px 2px ${COLORS.midnight};\r\n`;\r\n\r\nexport default HostLobby;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Label from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\n\r\nconst ErrorScreen = ({ title, message, spinner }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Label>{title}</Label>\r\n      <Message>{message}</Message>\r\n      {spinner && <Spinner color={COLORS.midnight} size={40} />}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ErrorScreen;\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Message = styled.div`\r\n  margin-top: 5px;\r\n  color: #fff0c3;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Label from \"../Labels/GenericLabel\";\r\nimport COLORS from \"../../COLORS\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst GameInProgress = () => {\r\n  const { roomId } = useParams();\r\n  const { round, setRoomId } = React.useContext(GameRoomContext);\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n  }, []);\r\n  return (\r\n    <Wrapper>\r\n      <Label>The Game is in Progress</Label>\r\n      <Message>\r\n        Please be patient while the game is in progress. You will be able to\r\n        join when the game ends and the host returns to the lobby.\r\n      </Message>\r\n      <RoundCounter>\r\n        The game you are trying to join is on round :{\" \"}\r\n        <RoundSpan>\r\n          {\" \"}\r\n          {round <= 9 ? round + 1 : round}\r\n          /10\r\n        </RoundSpan>\r\n      </RoundCounter>\r\n      <Spinner color={COLORS.midnight} size={40} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default GameInProgress;\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Message = styled.div`\r\n  margin-top: 5px;\r\n  color: #fff0c3;\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n\r\nconst RoundCounter = styled.div`\r\n  margin-top: 10px;\r\n  color: #fff0c3;\r\n  color: white;\r\n  font-size: 40px;\r\n  width: 60%;\r\n  text-align: center;\r\n`;\r\n\r\nconst RoundSpan = styled.span`\r\n  font-size: 40px;\r\n  color: #fff0c3;\r\n  text-shadow: 2px 2px white;\r\n  \r\n`;\r\n","import React from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport PlayerHandler from \"../SignIn/PlayerHandler\";\r\nimport SignIn from \"../SignIn/SignIn\";\r\nimport HostLobby from \"../Lobby/HostLobby\";\r\nimport ErrorScreen from \"../ErrorScreen/ErrorScreen\";\r\nimport GameInProgress from \"../ErrorScreen/GameInProgress\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst LobbyWrapper = () => {\r\n  const { currentUser, isHostPresent, setCurrentRoomId } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const { setRoomId, roomExists, setRoomExists, location } = React.useContext(\r\n    LobbyContext\r\n  );\r\n\r\n  const { roomId } = useParams();\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    const roomRef = firebase.database().ref(`Rooms/${roomId}`);\r\n\r\n    roomRef.on(\"value\", (snapshot) => {\r\n      setRoomExists(snapshot.exists());\r\n    });\r\n\r\n    return () => {\r\n      roomRef.off();\r\n    };\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    console.log(history.action);\r\n\r\n    return () => {\r\n      console.log(history.action);\r\n      if (history.action === \"POP\" && location === \"lobby\") {\r\n        history.push(\"/\");\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n    };\r\n  }, [history, location]);\r\n\r\n  if (roomExists === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"404 - Room not found\"\r\n        message=\"We're sorry, we couldn't find the room you are trying to join\"\r\n      />\r\n    );\r\n  }\r\n  if (isHostPresent === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"The host has left\"\r\n        message=\"We're sorry, the host has left and the game has ended. Return to the homepage to start a new game.\"\r\n      />\r\n    );\r\n  }\r\n  if (\r\n    !currentUser &&\r\n    roomExists === true &&\r\n    isHostPresent === true &&\r\n    location === \"gameRoom\"\r\n  ) {\r\n    return <GameInProgress />;\r\n  }\r\n  if (\r\n    !currentUser &&\r\n    roomExists === true &&\r\n    isHostPresent === true &&\r\n    location === \"lobby\"\r\n  ) {\r\n    return (\r\n      <SignIn\r\n        buttonHandler={PlayerHandler}\r\n        buttonMessage=\"Join your friends game !\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {roomExists === true && isHostPresent === true && currentUser ? (\r\n        <HostLobby />\r\n      ) : (\r\n        <Spinner size={50} color={\"lightgrey\"} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LobbyWrapper;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\n\r\nconst ProgressBar = ({ time }) => {\r\n  const { gamePhase } = React.useContext(GameRoomContext);\r\n  const { currentTrackGuesses } = React.useContext(CurrentUserContext);\r\n  const barRef = React.useRef(null);\r\n\r\n  const calculateGuessPosition = (time) => {\r\n    if (barRef !== null) {\r\n      let position = (time * barRef.current.clientWidth) / 31;\r\n      position.toFixed(0);\r\n      return position;\r\n    }\r\n  };\r\n  return (\r\n    <Wrapper>\r\n      <Bar gamePhase={gamePhase} ref={barRef} time={time}></Bar>\r\n      {currentTrackGuesses &&\r\n        Object.values(currentTrackGuesses).map((guess) => {\r\n          if (guess.artist && guess.songName) {\r\n            return (\r\n              <Guess\r\n                position={calculateGuessPosition(guess.time)}\r\n                key={guess.nickName}\r\n              >\r\n                {guess.nickName}\r\n                <Tip />\r\n              </Guess>\r\n            );\r\n          }\r\n        })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  background: #eadaf0;\r\n  height: 10px;\r\n  border-radius: 40px;\r\n  margin-top: 10px;\r\n  position: relative;\r\n`;\r\n\r\nconst Transform = (time) => keyframes`\r\n0%{\r\n  transform:scaleX(${time / 30})\r\n}100%{\r\n  transform: scaleX(0)\r\n}\r\n`;\r\nconst Bar = styled.div`\r\n  height: 10px;\r\n  width: 100%;\r\n  border-radius: 40px;\r\n  background: #19533c;\r\n  transform-origin: right;\r\n  animation: ${(props) =>\r\n      props.gamePhase === \"playing\" ? Transform(props.time) : null}\r\n    ${(props) => props.time * 1030}ms linear;\r\n`;\r\n\r\nconst Guess = styled.div`\r\n  max-width: 150px;\r\n  min-width: 90px;\r\n  font-size: 15px;\r\n  text-align: center;\r\n  border-radius: 10px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: white;\r\n  margin-top: 10px;\r\n  position: absolute;\r\n  top: 10px;\r\n  left: ${(props) => props.position}px;\r\n  transform: translateX(-50%);\r\n  z-index: 5;\r\n`;\r\n\r\nconst Tip = styled.div`\r\n  position: absolute;\r\n  z-index: -5;\r\n  background: white;\r\n  height: 30px;\r\n  width: 30px;\r\n  transform: rotate(45deg) translateX(-20%) translateY(-20%);\r\n`;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport cassette from \"../../assets/cassette.png\";\r\nimport COLORS from \"../../COLORS\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\n\r\nconst Cassette = ({ time }) => {\r\n  const { result, trackInfo, gamePhase } = React.useContext(GameRoomContext);\r\n  const [artist, setArtist] = React.useState(null);\r\n  const [songName, setSongName] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\") {\r\n      setArtist(null);\r\n      setSongName(null);\r\n    }\r\n    if (result === \"success\") {\r\n      setArtist(trackInfo.artist.name);\r\n      setSongName(trackInfo.title_short);\r\n    }\r\n    if (result === \"artist\") {\r\n      setArtist(trackInfo.artist.name);\r\n    }\r\n    if (result === \"songName\") {\r\n      setSongName(trackInfo.title_short);\r\n    }\r\n  }, [result, gamePhase]);\r\n\r\n  return (\r\n    <MasterWrapper>\r\n      <Wrapper>\r\n        <Image src={cassette}></Image>\r\n        <Counter>{time}</Counter>\r\n        <CogWrapper gamePhase={gamePhase}>\r\n          <Cog>\r\n            <Peg1></Peg1>\r\n            <Peg2 />\r\n            <Peg3></Peg3>\r\n            <Peg4 />\r\n          </Cog>\r\n        </CogWrapper>\r\n        <CogWrapper2 gamePhase={gamePhase}>\r\n          <Cog>\r\n            <Peg1></Peg1>\r\n            <Peg2 />\r\n            <Peg3></Peg3>\r\n            <Peg4 />\r\n          </Cog>\r\n        </CogWrapper2>\r\n        <Label>\r\n          <SongName>\r\n            <PlaceHolder>\r\n              {songName && (\r\n                <SongNameSpan songName={songName}>\r\n                  {songName && songName}\r\n                </SongNameSpan>\r\n              )}\r\n            </PlaceHolder>\r\n\r\n            <Separator>/</Separator>\r\n            <PlaceHolder>\r\n              {artist && (\r\n                <ArtistSpan artist={artist}>{artist && artist}</ArtistSpan>\r\n              )}\r\n            </PlaceHolder>\r\n          </SongName>\r\n        </Label>\r\n      </Wrapper>\r\n    </MasterWrapper>\r\n  );\r\n};\r\n\r\nexport default Cassette;\r\n\r\nconst MasterWrapper = styled.div`\r\n  height: 340px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  position: relative;\r\n  margin-bottom: -50px;\r\n  /* margin-top: 50px; */\r\n  transform: scale(0.8);\r\n`;\r\n\r\nconst Appear = keyframes`\r\nfrom{\r\n  width: 0;\r\n}\r\nto{\r\n  width: 100%;\r\n}`;\r\n\r\nconst SongNameSpan = styled.div`\r\n  font-family: \"Permanent Marker\", cursive;\r\n  /* font-family: \"Echizen\"; */\r\n  color: black;\r\n  /* width: 250px; */\r\n\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 20px;\r\n  transform-origin: left;\r\n  line-height: 2.3;\r\n  animation: ${(props) =>\r\n      props.songName !== null || props.artist !== null ? Appear : null}\r\n    500ms;\r\n`;\r\n\r\nconst ArtistSpan = styled.div`\r\n  font-family: \"Permanent Marker\", cursive;\r\n  /* font-family: \"Echizen\"; */\r\n  color: black;\r\n  /* width: 250px; */\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 20px;\r\n  transform-origin: left;\r\n  line-height: 2.3;\r\n  animation: ${(props) =>\r\n      props.songName !== null || props.artist !== null ? Appear : null}\r\n    500ms ease-in-out;\r\n`;\r\nconst PlaceHolder = styled.div`\r\n  width: 50%;\r\n  max-width: 50%;\r\n`;\r\n\r\nconst Separator = styled.div`\r\n  font-family: \"Echizen\";\r\n`;\r\nconst Image = styled.img``;\r\n\r\nconst Counter = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  top: 140px;\r\n  font-size: 60px;\r\n  color: ${COLORS.midnight};\r\n  font-family: \"Digital\";\r\n`;\r\n\r\nconst Spin = keyframes`\r\nfrom{\r\n  transform: rotate(0deg)\r\n}to{\r\n  transform: rotate(360deg)\r\n}`;\r\n\r\nconst CogWrapper2 = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  top: 134px;\r\n  right: 141px;\r\n  animation: ${Spin} 2000ms linear infinite forwards;\r\n  animation-play-state: ${(props) =>\r\n    props.gamePhase === \"playing\" ? \"running\" : \"paused\"};\r\n`;\r\n\r\nconst CogWrapper = styled.div`\r\n  width: fit-content;\r\n  position: absolute;\r\n  top: 135px;\r\n  left: 135px;\r\n  /* animation: ${(props) =>\r\n    props.gamePhase === \"playing\" ? Spin : null} 2000ms\r\n    linear infinite forwards; */\r\n  animation: ${Spin} 2000ms linear infinite forwards;\r\n  animation-play-state: ${(props) =>\r\n    props.gamePhase === \"playing\" ? \"running\" : \"paused\"};\r\n`;\r\n\r\nconst Cog = styled.div`\r\n  position: relative;\r\n  width: 70px;\r\n  height: 70px;\r\n  border-radius: 50%;\r\n  border: 4px solid ${COLORS.midnight};\r\n`;\r\n\r\nconst Peg1 = styled.div`\r\n  position: absolute;\r\n  border-left: 4px solid ${COLORS.midnight};\r\n  height: 15px;\r\n  border-radius: 3px;\r\n  left: 50%;\r\n  bottom: -3px;\r\n  transform: translateX(-2px);\r\n`;\r\n\r\nconst Peg2 = styled.div`\r\n  position: absolute;\r\n  border-left: 4px solid ${COLORS.midnight};\r\n  border-radius: 3px;\r\n  height: 15px;\r\n  left: 50%;\r\n  top: -3px;\r\n  transform: translateX(-2px);\r\n`;\r\n\r\nconst Peg3 = styled.div`\r\n  position: absolute;\r\n  border-bottom: 4px solid ${COLORS.midnight};\r\n  border-radius: 3px;\r\n  width: 15px;\r\n  left: -3px;\r\n  top: 50%;\r\n  transform: translateY(-2px);\r\n`;\r\n\r\nconst Peg4 = styled.div`\r\n  position: absolute;\r\n  border-bottom: 4px solid ${COLORS.midnight};\r\n  border-radius: 3px;\r\n  width: 15px;\r\n  right: -3px;\r\n  top: 50%;\r\n  transform: translateY(-2px);\r\n`;\r\n\r\nconst Label = styled.div`\r\n  border: 4px solid ${COLORS.midnight};\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: white;\r\n  position: absolute;\r\n  width: 500px;\r\n  padding: 10px 50px;\r\n  top: 45px;\r\n  /* text-shadow: 2px 2px 2px ${COLORS.midnight}; */\r\n`;\r\n\r\nconst SongName = styled.div`\r\n  border-bottom: 2px solid ${COLORS.midnight};\r\n  height: 35px;\r\n  font-family: \"Echizen\";\r\n  display: flex;\r\n  /* justify-content: center; */\r\n  color: black;\r\n  text-align: center;\r\n  font-size: 40px;\r\n`;\r\n","import leven from \"leven\";\r\n\r\nconst calculateDistance = (searchTerm, artistOrSongName, valueToSearch) => {\r\n  const artistOrSong = artistOrSongName.toLowerCase();\r\n  const wordsArray = searchTerm.toLowerCase().split(\" \");\r\n  let allSubStrings = [...wordsArray];\r\n\r\n  wordsArray.forEach((word, index) => {\r\n    let string = \"\";\r\n    for (let i = 0; i <= index; i++) {\r\n      string = string + \" \" + wordsArray[i];\r\n    }\r\n    allSubStrings.push(string.trim());\r\n  });\r\n\r\n  wordsArray.forEach((word, index) => {\r\n    let newArray = wordsArray.slice(index);\r\n    allSubStrings.push(newArray.join(\" \").trim());\r\n  });\r\n  let ArtistResultMap = allSubStrings.map((item) => {\r\n    return {\r\n      searchTerm: item,\r\n      searchingFor: valueToSearch,\r\n      distance: leven(item, `${artistOrSong}`),\r\n    };\r\n  });\r\n  ArtistResultMap = ArtistResultMap.sort((a, b) => {\r\n    return a.distance - b.distance;\r\n  });\r\n\r\n  let marginOfError = Math.floor((artistOrSong.length / 10) * 4);\r\n  if (marginOfError > 5) {\r\n    marginOfError = 5;\r\n  }\r\n\r\n  if (ArtistResultMap[0].distance < marginOfError) {\r\n    return {\r\n      [`${valueToSearch}`]: true,\r\n      distance: ArtistResultMap[0].distance,\r\n      marginOfError: marginOfError,\r\n    };\r\n  } else {\r\n    return {\r\n      [`${valueToSearch}`]: false,\r\n      distance: ArtistResultMap[0].distance,\r\n      marginOfError: marginOfError,\r\n    };\r\n  }\r\n};\r\n\r\n// const levenTestResult = calculateDistance(\r\n//   \"the beatles\",\r\n//   \"the beach boys\",\r\n//   \"songName\"\r\n// );\r\n\r\n// console.log(levenTestResult);\r\n\r\nexport default calculateDistance;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport calculateDistance from \"./LevenTest\";\r\nimport wrong from \"../../assets/sounds/wrong.mp3\";\r\nimport correct from \"../../assets/sounds/correct.mp3\";\r\nimport success from \"../../assets/sounds/success.mp3\";\r\nimport { ip } from \"../../ip\";\r\n\r\nfunction fetchHelper(roomId, currentUser, correctGuess) {\r\n  fetch(`${ip}/validateAnswer`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify({\r\n      currentUser: currentUser,\r\n      roomId: roomId,\r\n      correctGuess,\r\n    }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => console.log(data))\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nconst SearchBar = ({ wrongRef, correctRef, successRef }) => {\r\n  const { roomId } = useParams();\r\n  const { currentUser, correctGuess, setCorrectGuess } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\r\n  const [placeHolderText, setPlaceHolderText] = React.useState(\r\n    \"Prep for the first Jam !\"\r\n  );\r\n\r\n  const { gamePhase, result, setResult, trackInfo, round } = React.useContext(\r\n    GameRoomContext\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\") {\r\n      setCorrectGuess({ artist: false, songName: false });\r\n      setResult(null);\r\n      setSearchTerm(\"\");\r\n\r\n      if (round === 10) {\r\n        setPlaceHolderText(\"Prep for final ranking.\");\r\n        return;\r\n      }\r\n      if (round === 0) {\r\n        setPlaceHolderText(\"Prep for the first jam.\");\r\n        return;\r\n      }\r\n      setPlaceHolderText(\"Prepare for next song.\");\r\n    }\r\n    if (gamePhase === \"playing\") {\r\n      setPlaceHolderText(\"Guess the song/artist.\");\r\n    }\r\n  }, [gamePhase, round]);\r\n\r\n  React.useEffect(() => {\r\n    if (result === \"success\") {\r\n      setPlaceHolderText(\"You got the correct answer.\");\r\n    }\r\n    if (result === \"artist\") {\r\n      setPlaceHolderText(\"Now guess the song name.\");\r\n    }\r\n    if (result === \"songName\") {\r\n      setPlaceHolderText(\"Now guess the artist\");\r\n    }\r\n  }, [result]);\r\n\r\n  React.useEffect(() => {\r\n    if (result === \"fail\" && wrongRef.current) {\r\n      wrongRef.current.play();\r\n    }\r\n    if (result === \"artist\" || (result === \"songName\" && correctRef.current)) {\r\n      correctRef.current.play();\r\n    }\r\n    if (result === \"success\" && successRef.current) {\r\n      successRef.current.play();\r\n    }\r\n  }, [result, wrongRef, correctRef, successRef]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <audio ref={wrongRef} src={wrong} />\r\n      <audio ref={correctRef} src={correct} />\r\n      <audio ref={successRef} src={success} />\r\n      <Input\r\n        result={result}\r\n        value={searchTerm}\r\n        placeholder={placeHolderText}\r\n        onChange={(ev) => {\r\n          setSearchTerm(ev.target.value);\r\n        }}\r\n        onAnimationEnd={(ev) => {\r\n          setResult(null);\r\n        }}\r\n        onKeyDown={(ev) => {\r\n          if (\r\n            ev.key === \"Enter\" &&\r\n            gamePhase === \"playing\" &&\r\n            result !== \"success\"\r\n          ) {\r\n            const artist = trackInfo.artist.name.toLowerCase();\r\n\r\n            const songName = trackInfo.title_short\r\n              .split(\"(\")[0]\r\n              .toLowerCase()\r\n              .trim();\r\n\r\n            const artistResult = calculateDistance(\r\n              searchTerm,\r\n              artist,\r\n              \"artist\"\r\n            );\r\n            const songNameResult = calculateDistance(\r\n              searchTerm,\r\n              songName,\r\n              \"songName\"\r\n            );\r\n            const d = new Date();\r\n            const timeStamp = d.getTime();\r\n\r\n            setSearchTerm(\"\");\r\n\r\n            if (\r\n              artistResult.artist === false &&\r\n              songNameResult.songName === false\r\n            ) {\r\n              setResult(\"fail\");\r\n              return;\r\n            }\r\n\r\n            if (artistResult.artist && songNameResult.songName) {\r\n              setResult(\"success\");\r\n              setCorrectGuess({\r\n                artist: true,\r\n                songName: true,\r\n              });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: true,\r\n                songName: true,\r\n                timeStamp: timeStamp,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n\r\n            if (artistResult.artist) {\r\n              if (\r\n                correctGuess.songName === true &&\r\n                correctGuess.artist === false\r\n              ) {\r\n                setResult(\"success\");\r\n                setCorrectGuess({ artist: true, songName: true });\r\n                fetchHelper(roomId, currentUser, {\r\n                  artist: true,\r\n                  songName: true,\r\n                  timeStamp: timeStamp,\r\n                  previousGuess: correctGuess,\r\n                });\r\n                return;\r\n              }\r\n              setResult(\"artist\");\r\n              setCorrectGuess({ artist: true, songName: false });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: true,\r\n                songName: false,\r\n                timeStamp: null,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n\r\n            if (songNameResult.songName) {\r\n              if (\r\n                correctGuess.songName === false &&\r\n                correctGuess.artist === true\r\n              ) {\r\n                setResult(\"success\");\r\n                setCorrectGuess({ artist: true, songName: true });\r\n                fetchHelper(roomId, currentUser, {\r\n                  artist: true,\r\n                  songName: true,\r\n                  timeStamp: timeStamp,\r\n                  previousGuess: correctGuess,\r\n                });\r\n                return;\r\n              }\r\n              setResult(\"songName\");\r\n              setCorrectGuess({ artist: false, songName: true });\r\n              fetchHelper(roomId, currentUser, {\r\n                artist: false,\r\n                songName: true,\r\n                timeStamp: null,\r\n                previousGuess: correctGuess,\r\n              });\r\n              return;\r\n            }\r\n          }\r\n        }}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default SearchBar;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Fail = keyframes`\r\n0%{\r\n  transform: translateX(0)\r\n}\r\n20%{\r\n  transform: translateX(15px)\r\n}\r\n40%{\r\n  transform: translateX(0px)\r\n}\r\n60%{\r\n  transform: translateX(-15px)\r\n}\r\n100%{\r\n  transform: translateX(0px)\r\n}\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  height: 55px;\r\n  color: black;\r\n  border-radius: 40px;\r\n  border: none;\r\n  text-align: left;\r\n  font-size: 40px;\r\n  padding: 0 30px;\r\n  margin-top: 10px;\r\n\r\n  &::placeholder {\r\n    color: ${(props) => (props.result === \"success\" ? \" #34eb98\" : \"#eadaf0\")};\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n\r\n  animation: ${(props) => (props.result === \"fail\" ? Fail : null)} 500ms\r\n    ease-in-out;\r\n`;\r\n","import React from \"react\";\r\nimport COLORS from \"../../COLORS\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst PreviousSong = () => {\r\n  const { roomId } = useParams();\r\n  const { historyArray, round, setRoomId } = React.useContext(GameRoomContext);\r\n\r\n  React.useEffect(() => {\r\n    setRoomId(roomId);\r\n  }, [roomId, setRoomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Previous Songs:</GenericLabel>\r\n      <SongListWrapper>\r\n        <RoundCounter>Round: {round < 10 ? round + 1 : round}/10</RoundCounter>\r\n        {historyArray\r\n          .map((song, index) => {\r\n            if (index < round) {\r\n              return (\r\n                <SongInfoWrapper key={song.title_short + index}>\r\n                  <SongArt src={song.album.cover_medium} />\r\n                  <InfoSection>\r\n                    <Title>{song.title_short}</Title>\r\n                    <Artist>{song.artist.name}</Artist>\r\n                  </InfoSection>\r\n                </SongInfoWrapper>\r\n              );\r\n            }\r\n            return;\r\n          })\r\n          .reverse()}\r\n      </SongListWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default PreviousSong;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  margin-bottom: 50px;\r\n  padding-right: 30px;\r\n`;\r\nconst Appear = keyframes`\r\n0%{\r\n  opacity: 0;\r\n  transform: translateY(-100%)\r\n\r\n}100%{\r\n  opacity: 1;\r\n  transform: translateY(0)\r\n\r\n}`;\r\n\r\nconst SongListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 100%;\r\n  min-height: 100px;\r\n  background: transparent;\r\n  transition: 500ms;\r\n`;\r\n\r\nconst RoundCounter = styled.div`\r\n  width: 100%;\r\n  \r\n  font-size: 20px;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst SongInfoWrapper = styled.div`\r\n  display: flex;\r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n  animation: ${Appear} 800ms ease-in-out;\r\n  transform-origin: left;\r\n`;\r\n\r\nconst SongArt = styled.img`\r\n  width: 75px;\r\n  height: 75px;\r\n  margin-right: 10px;\r\n  border-radius: 50%;\r\n`;\r\n\r\nconst InfoSection = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.span``;\r\n\r\nconst Artist = styled.span``;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport GenericLabel from \"../Labels/GenericLabel\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { GiBeerBottle } from \"react-icons/gi\";\r\nimport COLORS from \"../../COLORS\";\r\n\r\nconst correctGuessOutput = (usersCorrectGuess) => {\r\n  console.log(usersCorrectGuess);\r\n  if (usersCorrectGuess.artist && usersCorrectGuess.songName)\r\n    return `in ${usersCorrectGuess.time.toFixed(2)} seconds`;\r\n  if (usersCorrectGuess.artist) {\r\n    return \"The artist\";\r\n  }\r\n  if (usersCorrectGuess.songName) {\r\n    return \"The song's name \";\r\n  }\r\n};\r\n\r\nconst Ranking = () => {\r\n  const {\r\n    usersList,\r\n    setCurrentRoomId,\r\n    currentUser,\r\n    currentTrackGuesses,\r\n  } = React.useContext(CurrentUserContext);\r\n\r\n  const { roomId } = useParams();\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GenericLabel>Ranking: </GenericLabel>\r\n      <UsersListWrapper>\r\n        {usersList.map((user, index) => {\r\n          return (\r\n            <UserWrapper key={user.playerId}>\r\n              <InfoWrapper>\r\n                <Rank>{index + 1}.</Rank>\r\n\r\n                <UserInfoWrapper>\r\n                  <NameWrapper>\r\n                    {user.role === \"host\" ? (\r\n                      <Icon\r\n                        style={{\r\n                          color: `${\r\n                            currentUser.playerId === user.playerId\r\n                              ? COLORS.midnight\r\n                              : \"black\"\r\n                          }`,\r\n                        }}\r\n                      >\r\n                        <GiBeerBottle />\r\n                      </Icon>\r\n                    ) : null}\r\n                    <UserName\r\n                      style={{\r\n                        color: `${\r\n                          currentUser.playerId === user.playerId\r\n                            ? COLORS.midnight\r\n                            : \"black\"\r\n                        }`,\r\n                      }}\r\n                    >\r\n                      {user.nickName}\r\n                    </UserName>\r\n                  </NameWrapper>\r\n                  <CorrectGuessWrapper>\r\n                    Guessed:{\" \"}\r\n                    {currentTrackGuesses &&\r\n                      currentTrackGuesses[`${user.playerId}`] && (\r\n                        <span>\r\n                          {correctGuessOutput(\r\n                            currentTrackGuesses[`${user.playerId}`]\r\n                          )}\r\n                        </span>\r\n                      )}\r\n                  </CorrectGuessWrapper>\r\n                </UserInfoWrapper>\r\n              </InfoWrapper>\r\n              <ScoreInfoWrapper>\r\n                <Score>{user.points}pts.</Score>\r\n              </ScoreInfoWrapper>\r\n            </UserWrapper>\r\n          );\r\n        })}\r\n      </UsersListWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default Ranking;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 30px;\r\n  margin-bottom: 50px;\r\n  padding-right: 30px;\r\n`;\r\n\r\nconst UsersListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 100%;\r\n  background: transparent;\r\n  transition: 500ms;\r\n`;\r\n\r\nconst UserWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin: 5px 0px;\r\n`;\r\n\r\nconst InfoWrapper = styled.div`\r\n  display: flex;\r\n  max-width: 80%;\r\n`;\r\n\r\nconst UserInfoWrapper = styled.div``;\r\n\r\nconst Rank = styled.h1`\r\n  font-size: 40px;\r\n  font-weight: 800;\r\n  margin-right: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst Score = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst UserName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ScoreInfoWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst CorrectGuessWrapper = styled.div`\r\n  font-size: 20px;\r\n`;\r\n\r\nconst NameWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport ProgressBar from \"./ProgressBar\";\r\nimport Cassette from \"./Cassette\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport PreviousSong from \"./PreviousSongs\";\r\nimport * as firebase from \"firebase\";\r\nimport Ranking from \"./Ranking\";\r\nimport { ip } from \"../../ip\";\r\nimport * as workerTimers from \"worker-timers\";\r\nimport VolumeButton from \"../Button/VolumeButton\";\r\n\r\nconst asyncRequest = async (roomId) => {\r\n  await fetch(`${ip}/updatePhase`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify({ roomId, currentPhase: \"playing\" }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n    })\r\n    .catch((err) => console.log(err));\r\n\r\n  fetch(`${ip}/updateRound?roomId=${roomId}`, {\r\n    method: \"GET\",\r\n    headers: { accept: \"application/json\" },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => console.log(data))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst GameRoom = () => {\r\n  const { roomId } = useParams();\r\n  const {\r\n    trackUrl,\r\n    setTrackUrl,\r\n    gamePhase,\r\n    setGamePhase,\r\n    setTrackInfo,\r\n    round,\r\n  } = React.useContext(GameRoomContext);\r\n  const { currentUser } = React.useContext(CurrentUserContext);\r\n  const [time, setTime] = React.useState(5);\r\n  const [volume, setVolume] = React.useState(0.5);\r\n\r\n  const audioRef = React.useRef(null);\r\n  const wrongRef = React.useRef(null);\r\n  const correctRef = React.useRef(null);\r\n  const successRef = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    audioRef.current.volume = volume;\r\n    if (wrongRef.current) {\r\n      wrongRef.current.volume = volume * 2 <= 1 ? volume * 2 : 1;\r\n    }\r\n    if (correctRef.current) {\r\n      correctRef.current.volume = volume * 2 <= 1 ? volume * 2 : 1;\r\n    }\r\n    if (successRef.current) {\r\n      successRef.current.volume = volume * 1.2 <= 1 ? volume * 1.2 : 1;\r\n    }\r\n  }, [audioRef, wrongRef, correctRef, successRef, volume]);\r\n\r\n  //This sets the interval for the timer\r\n  React.useEffect(() => {\r\n    let interval = workerTimers.setInterval(() => {\r\n      if (time > 0) {\r\n        setTime(time - 1);\r\n      }\r\n    }, 1000);\r\n\r\n    //Host updates the phase when the host timer reaches 0\r\n    if (time === 0 && gamePhase === \"loading\" && currentUser.role === \"host\") {\r\n      fetch(`${ip}/updatePhase`, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ currentPhase: \"loading\", roomId: roomId }),\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n        });\r\n    }\r\n    if (time === 0 && gamePhase === \"playing\" && currentUser.role === \"host\") {\r\n      asyncRequest(roomId);\r\n    }\r\n    return () => {\r\n      workerTimers.clearInterval(interval);\r\n    };\r\n  }, [time, gamePhase]);\r\n\r\n  //This checks for gamePhase change and sets the timer to the appropriate phase\r\n  React.useEffect(() => {\r\n    const gamePhaseRef = firebase.database().ref(`Rooms/${roomId}/phase`);\r\n    gamePhaseRef.on(\"value\", (snapshot) => {\r\n      let phase = snapshot.val();\r\n      if (phase === \"playing\") {\r\n        if (round > 9) {\r\n          setGamePhase(phase);\r\n          return;\r\n        }\r\n        setTime(30);\r\n        audioRef.current.play();\r\n        console.log(\"playtrack\");\r\n      }\r\n      if (phase === \"loading\") {\r\n        setTime(5);\r\n        audioRef.current.pause();\r\n        console.log(\"stopTrack\");\r\n      }\r\n      setGamePhase(phase);\r\n    });\r\n    return () => {\r\n      const gamePhaseRef = firebase.database().ref(`Rooms/${roomId}/phase`);\r\n      gamePhaseRef.off();\r\n    };\r\n  }, [roomId, round]);\r\n\r\n  //This updates the current song during the loading stage\r\n  React.useEffect(() => {\r\n    if (gamePhase === \"loading\" && currentUser.role === \"host\") {\r\n      console.log(\"in fetch track\");\r\n      fetch(`${ip}/updateCurrentTrack`, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ roomId: roomId }),\r\n        headers: {\r\n          Accept: \"applicatition/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          // setTrackUrl(data.selectedSongUrl);\r\n        });\r\n    }\r\n  }, [gamePhase]);\r\n\r\n  React.useEffect(() => {\r\n    const currentTrackInfo = firebase\r\n      .database()\r\n      .ref(`/Rooms/${roomId}/currentTrack/trackInfo`);\r\n    currentTrackInfo.on(\"value\", (snapshot) => {\r\n      let currentTrackInfo = snapshot.val();\r\n      if (currentTrackInfo) {\r\n        setTrackInfo(currentTrackInfo);\r\n        setTrackUrl(currentTrackInfo.preview);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      currentTrackInfo.off();\r\n    };\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <VolumeButton volume={volume} setVolume={setVolume} />\r\n      <Player src={trackUrl} ref={audioRef}>\r\n        I'm sorry, your browser doesn't support audio\r\n      </Player>\r\n      <SearchBar\r\n        wrongRef={wrongRef}\r\n        correctRef={correctRef}\r\n        successRef={successRef}\r\n      />\r\n      <ProgressBar time={time} />\r\n      <Cassette time={time}></Cassette>\r\n      <BottomSection>\r\n        <PreviousSong />\r\n        <Ranking />\r\n      </BottomSection>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 40px;\r\n`;\r\n\r\nconst Player = styled.audio``;\r\n\r\nconst BottomSection = styled.div`\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 50% 50%;\r\n`;\r\n\r\nexport default GameRoom;\r\n","import React from \"react\";\r\nimport COLORS from \"../../COLORS\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"../Button/Button\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { LobbyContext } from \"../../LobbyContext\";\r\nimport { GiBeerBottle } from \"react-icons/gi\";\r\nimport { ip } from \"../../ip\";\r\n\r\nconst GameOverScreen = () => {\r\n  const { usersList, setCurrentRoomId, currentUser } = React.useContext(\r\n    CurrentUserContext\r\n  );\r\n  const { setRound, setHistoryArray, setGameStarted } = React.useContext(\r\n    GameRoomContext\r\n  );\r\n  const { roomId } = useParams();\r\n  const { location, deletePlaylist } = React.useContext(LobbyContext);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    if (location !== \"gameRoom\") {\r\n      history.push(`/lobby/${roomId}`);\r\n    }\r\n    return () => {\r\n      setRound(0);\r\n      deletePlaylist();\r\n      setHistoryArray([]);\r\n      setGameStarted(false);\r\n    };\r\n  }, [location, roomId]);\r\n\r\n  React.useEffect(() => {\r\n    setCurrentRoomId(roomId);\r\n  }, [roomId]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Title>Here is the final ranking !</Title>\r\n      <UsersListWrapper>\r\n        {usersList.map((user, index) => {\r\n          return (\r\n            <UserWrapper key={user.playerId}>\r\n              <InfoWrapper>\r\n                <Rank>{index + 1}.</Rank>\r\n\r\n                <UserInfoWrapper>\r\n                  <NameWrapper>\r\n                    {user.role === \"host\" ? (\r\n                      <Icon\r\n                        style={{\r\n                          color: `${\r\n                            currentUser.playerId === user.playerId\r\n                              ? COLORS.midnight\r\n                              : \"black\"\r\n                          }`,\r\n                        }}\r\n                      >\r\n                        <GiBeerBottle />\r\n                      </Icon>\r\n                    ) : null}\r\n                    <UserName\r\n                      style={{\r\n                        color: `${\r\n                          currentUser.playerId === user.playerId\r\n                            ? COLORS.midnight\r\n                            : \"black\"\r\n                        }`,\r\n                      }}\r\n                    >\r\n                      {user.nickName}\r\n                    </UserName>\r\n                  </NameWrapper>\r\n                </UserInfoWrapper>\r\n              </InfoWrapper>\r\n              <ScoreInfoWrapper>\r\n                <Score>{user.points}pts.</Score>\r\n              </ScoreInfoWrapper>\r\n            </UserWrapper>\r\n          );\r\n        })}\r\n      </UsersListWrapper>\r\n      {currentUser.role === \"host\" ? (\r\n        <ButtonsWrapper>\r\n          <Button\r\n            handler={() => {\r\n              fetch(`${ip}/${roomId}/lobbyReset`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n              })\r\n                .then((res) => res.json())\r\n                .then((data) => console.log(data))\r\n                .catch((err) => console.log(err));\r\n            }}\r\n          >\r\n            Return to Lobby\r\n          </Button>\r\n          <Button\r\n            handler={() => {\r\n              fetch(`${ip}/${roomId}/GameReset`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n              })\r\n                .then((res) => res.json())\r\n                .then((data) => console.log(data))\r\n                .catch((err) => console.log(err));\r\n            }}\r\n          >\r\n            Restart Game\r\n          </Button>\r\n        </ButtonsWrapper>\r\n      ) : (\r\n        <Title>\r\n          Plase wait for the host to choose to return to the lobby or to restart\r\n          game.\r\n        </Title>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default GameOverScreen;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  \r\n  font-size: 60px;\r\n  \r\n  color: #fff0c3;\r\n  margin: 20px 0px;\r\n`;\r\n\r\nconst UsersListWrapper = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  font-size: 30px;\r\n  width: 50%;\r\n  background: transparent;\r\n  transition: 500ms;\r\n  text-shadow: none;\r\n  color: black;\r\n  font-family: \"\";\r\n`;\r\n\r\nconst UserWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin: 5px 0px;\r\n`;\r\n\r\nconst InfoWrapper = styled.div`\r\n  display: flex;\r\n  max-width: 80%;\r\n`;\r\n\r\nconst UserInfoWrapper = styled.div``;\r\n\r\nconst Rank = styled.h1`\r\n  font-size: 40px;\r\n  font-weight: 800;\r\n  margin-right: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: fit-content;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst Score = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst UserName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ScoreInfoWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst NameWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst ButtonsWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  width: 100%;\r\n  margin: 20px 0px;\r\n`;\r\n","import React from \"react\";\r\nimport GameRoom from \"./GameRoom\";\r\nimport GameOver from \"./GameOver\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { GameRoomContext } from \"../../GameRoomContext\";\r\nimport { CurrentUserContext } from \"../../CurrentUserContext\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport ErrorScreen from \"../ErrorScreen/ErrorScreen\";\r\nimport * as firebase from \"firebase\";\r\n\r\nconst GameRoomWrapper = () => {\r\n  const {\r\n    round,\r\n    gamePhase,\r\n    gameRoomExists,\r\n    setGameRoomExists,\r\n    setGameStarted,\r\n  } = React.useContext(GameRoomContext);\r\n  const { currentUser, isHostPresent } = React.useContext(CurrentUserContext);\r\n\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  console.log(gameRoomExists);\r\n\r\n  React.useEffect(() => {\r\n    const roomRef = firebase.database().ref(`Rooms/${roomId}`);\r\n\r\n    roomRef.on(\"value\", (snapshot) => {\r\n      setGameRoomExists(snapshot.exists());\r\n    });\r\n  }, [roomId]);\r\n\r\n  React.useEffect(() => {\r\n    console.log(history.action);\r\n\r\n    return () => {\r\n      if (history.action === \"POP\") {\r\n        history.push(\"/\");\r\n        window.location.replace(\"/\");\r\n      }\r\n    };\r\n  }, [history]);\r\n\r\n  React.useEffect(() => {\r\n    setGameStarted(true);\r\n  }, []);\r\n\r\n  if (gameRoomExists === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"404 - Room not found\"\r\n        message={\r\n          \"We're sorry, we couldn't find the room you are trying to join\"\r\n        }\r\n      />\r\n    );\r\n  }\r\n  if (isHostPresent === false) {\r\n    return (\r\n      <ErrorScreen\r\n        title=\"The host has left\"\r\n        message=\"We're sorry, the host has left and the game has ended. Return to the homepage to start a new game.\"\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!currentUser && gameRoomExists) {\r\n    return <>{history.push(`/lobby/${roomId}`)}</>;\r\n  }\r\n\r\n  if (round > 9 && gamePhase === \"playing\" && gameRoomExists === true) {\r\n    return <GameOver />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {gameRoomExists === true && isHostPresent === true && currentUser ? (\r\n        <GameRoom />\r\n      ) : (\r\n        <Spinner size={50} color={\"lightgrey\"} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GameRoomWrapper;\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport COLORS from \"./COLORS\";\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n*{\r\n  box-sizing:border-box;\r\n  font-family: \"Roboto Condensed\", sans-serif;\r\n  /* font-family:'Echizen'; */\r\n  /* color: black; */\r\n}\r\n\r\nbody{\r\n  background: ${COLORS.main}\r\n}\r\n\r\nhtml, body, div, span, applet, object, iframe,\r\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\na, abbr, acronym, address, big, cite, code,\r\ndel, dfn, em, img, ins, kbd, q, s, samp,\r\nsmall, strike, strong, sub, sup, tt, var,\r\nb, u, i, center,\r\ndl, dt, dd, ol, ul, li,\r\nfieldset, form, label, legend,\r\ntable, caption, tbody, tfoot, thead, tr, th, td,\r\narticle, aside, canvas, details, embed, \r\nfigure, figcaption, footer, header, hgroup, \r\nmenu, nav, output, ruby, section, summary,\r\ntime, mark, audio, video {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tborder: 0;\r\n\tfont-size: 100%;\r\n\t/* font: inherit; */\r\n\tvertical-align: baseline;\r\n}\r\n/* HTML5 display-role reset for older browsers */\r\narticle, aside, details, figcaption, figure, \r\nfooter, header, hgroup, menu, nav, section {\r\n\tdisplay: block;\r\n}\r\nbody {\r\n\tline-height: 1;\r\n}\r\nol, ul {\r\n\tlist-style: none;\r\n}\r\nblockquote, q {\r\n\tquotes: none;\r\n}\r\nblockquote:before, blockquote:after,\r\nq:before, q:after {\r\n\tcontent: '';\r\n\tcontent: none;\r\n}\r\ntable {\r\n\tborder-collapse: collapse;\r\n\tborder-spacing: 0;\r\n}\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Background from \"./Background/Background\";\r\nimport Header from \"./Header/Header\";\r\nimport SignIn from \"./SignIn/SignIn\";\r\nimport HostHandler from \"./SignIn/HostHandler\";\r\nimport LobbyWrapper from \"./Lobby/LobbyWrapper\";\r\nimport GameRoomWrapper from \"./GameRoom/GameRoomWrapper\";\r\nimport GlobalStyles from \"../GlobalStyles\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Background>\r\n        <Header />\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <SignIn\r\n              buttonHandler={HostHandler}\r\n              buttonMessage=\"Create Room\"\r\n            />\r\n          </Route>\r\n          <Route path=\"/lobby/:roomId\">\r\n            <LobbyWrapper />\r\n          </Route>\r\n          <Route path=\"/gameroom/:roomId\">\r\n            <GameRoomWrapper />\r\n          </Route>\r\n        </Switch>\r\n        <GlobalStyles />\r\n        \r\n      </Background>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport FireBaseContextProvider from \"./FirebaseContext\";\r\nimport CurrentUserContextProvider from \"./CurrentUserContext\";\r\nimport LobbyContextProvider from \"./LobbyContext\";\r\nimport GameRoomContextProvider from \"./GameRoomContext\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(\r\n  <FireBaseContextProvider>\r\n    <CurrentUserContextProvider>\r\n      <LobbyContextProvider>\r\n        <GameRoomContextProvider>\r\n          <App />\r\n        </GameRoomContextProvider>\r\n      </LobbyContextProvider>\r\n    </CurrentUserContextProvider>\r\n  </FireBaseContextProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}